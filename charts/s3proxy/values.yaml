# Default values for s3proxy.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

# -- Number of S3Proxy replicas
replicaCount: 1

image:
  # -- S3Proxy image repository
  repository: andrewgaul/s3proxy
  # -- Image pull policy
  pullPolicy: IfNotPresent
  # -- Overrides the image tag whose default is the chart appVersion
  tag: ""

configMergeImage:
  # -- Config merge container image repository
  repository: busybox
  # -- Config merge container image pull policy
  pullPolicy: IfNotPresent
  # -- Config merge container image tag
  tag: "1.36"

# -- Image pull secrets
imagePullSecrets: []
# -- String to partially override s3proxy.fullname template
nameOverride: ""
# -- String to fully override s3proxy.fullname template
fullnameOverride: ""

serviceAccount:
  # -- Specifies whether a service account should be created
  create: false
  # -- Annotations to add to the service account
  annotations: {}
  # -- The name of the service account to use. If not set and create is true, a name is generated using the fullname template
  name: ""

# -- Annotations to add to the pod
podAnnotations: {}

# -- Pod security context
podSecurityContext: {}

# -- Container security context
securityContext: {}

service:
  # -- Kubernetes service type
  type: ClusterIP
  # -- Service port
  port: 9000
  # -- Target port (controls both the container port and S3Proxy bind port)
  targetPort: 9000
  # -- Service annotations
  annotations: {}

ingress:
  # -- Enable ingress
  enabled: false
  # -- Ingress class name
  className: ""
  # -- Ingress annotations
  annotations: {}
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"
  # -- Ingress hosts configuration
  hosts: []
  #  - host: chart-example.local
  #    paths:
  #      - path: /
  #        pathType: ImplementationSpecific
  # -- TLS configuration
  tls: []
  #  - secretName: chart-example-tls
  #    hosts:
  #      - chart-example.local

# -- Resource limits and requests
resources: {}
  # We usually recommend not to specify default resources and to leave this as a conscious
  # choice for the user. This also increases chances charts run on environments with little
  # resources, such as Minikube. If you do want to specify resources, uncomment the following
  # lines, adjust them as necessary, and remove the curly braces after 'resources:'.
  # limits:
  #   cpu: 100m
  #   memory: 128Mi
  # requests:
  #   cpu: 100m
  #   memory: 128Mi

autoscaling:
  # -- Enable HPA
  enabled: false
  # -- Minimum number of replicas
  minReplicas: 1
  # -- Maximum number of replicas
  maxReplicas: 100
  # -- Target CPU utilization percentage
  targetCPUUtilizationPercentage: 80
  # targetMemoryUtilizationPercentage: 80

# -- Node selector for pod assignment
nodeSelector: {}

# -- Tolerations for pod assignment
tolerations: []

# -- Affinity for pod assignment
affinity: {}

config:
  # -- Log level for S3Proxy (DEBUG, INFO, WARN, ERROR)
  logLevel: "INFO"

  auth:
    # -- Authorization type (none, aws-v2, aws-v4, aws-v2-or-v4)
    type: "aws-v4"
    # -- S3 Access Key ID for client authentication
    identity: ""
    # -- S3 Secret Access Key for client authentication
    secret: ""

  # -- Virtual Host configuration
  virtualHost: ""

  cors:
    # -- Enable CORS support
    enabled: false
    # -- Allowed origins (e.g., ["https://example.com", "https://.+\\.example\\.com"])
    allowOrigins: []
    # -- Allowed methods
    allowMethods: ["GET", "PUT", "POST", "HEAD", "DELETE"]
    # -- Allowed headers
    allowHeaders: ["Accept", "Content-Type"]
    # -- Allow credentials
    allowCredential: false

  buckets:
    # -- Map virtual bucket names to actual backend buckets
    alias: {}
      # example-bucket: "real-bucket-name"

    # -- Assign specific buckets to different backends (glob patterns supported)
    locator: []
      # - "bucket1"
      # - "bucket2"
      # - "*.test"  # glob pattern supported

  middlewares:
    # -- Make backend read-only
    readOnly: false
    # -- Enable eventual consistency modeling
    eventualConsistency: false
    # -- Enable sharded backend containers
    shardedBackend: false
    # -- Enable large object mocking
    largeObjectMocking: false

  backends:
    filesystem:
      # -- Enable filesystem backend
      enabled: true
      # -- Use NIO2 implementation (filesystem-nio2) instead of standard filesystem
      nio2: true
      # -- Base directory for filesystem backend
      basedir: "/data/s3proxy"

    transient:
      # -- Enable transient (in-memory) backend
      enabled: false
      # -- Use NIO2 implementation (transient-nio2) instead of standard transient
      nio2: true

    s3:
      # -- Enable S3 backend
      enabled: false
      # -- Use AWS-specific S3 provider (aws-s3) instead of generic S3 provider
      aws: true
      # -- AWS region
      region: ""
      # -- S3 endpoint
      endpoint: ""
      # -- S3 Access Key ID for backend
      accessKeyID: ""
      # -- S3 Secret Access Key for backend
      secretAccessKey: ""

    azureblob:
      # -- Enable Azure Blob Storage backend
      enabled: false
      # -- Provider type (azureblob or azureblob-sdk)
      provider: "azureblob"
      # -- Storage account name
      account: ""
      # -- Storage account key
      key: ""
      # -- Azure endpoint
      endpoint: ""
      # -- SAS token
      sasToken: ""

    googleCloudStorage:
      # -- Enable Google Cloud Storage backend
      enabled: false
      # -- GCP project ID
      projectID: ""
      # -- Private key (only used when jsonCredentials.enabled is false)
      privateKey: ""
      # -- Service account email or user email (used with both privateKey and jsonCredentials methods)
      clientEmail: ""
      # -- JSON credentials configuration
      jsonCredentials:
        # -- Use JSON credentials file instead of privateKey
        enabled: false
        # -- JSON content for creating a new secret (takes precedence over existingSecret)
        jsonContent: ""
        # -- Name of existing secret containing GCP credentials JSON
        existingSecret: ""
        # -- Key in the secret containing the JSON credentials (default: credentials.json)
        secretKey: "credentials.json"

    b2:
      # -- Enable Backblaze B2 backend
      enabled: false
      # -- B2 account ID
      account: ""
      # -- B2 application key
      applicationKey: ""

    openstackSwift:
      # -- Enable OpenStack Swift backend
      enabled: false
      # -- Authentication URL
      authURL: ""
      # -- Tenant name
      tenantName: ""
      # -- Username
      userName: ""
      # -- Password
      password: ""
      # -- Region
      region: ""

    rackspaceCloudfiles:
      # -- Enable Rackspace Cloud Files backend
      enabled: false
      # -- Region (uk or us)
      region: "us"
      # -- Username
      userName: ""
      # -- API key
      apiKey: ""

persistence:
  # -- Enable persistence using PVC
  enabled: true
  # -- PVC Access Mode
  accessMode: ReadWriteOnce
  # -- PVC Storage Request
  size: 10Gi
  # -- Storage Class
  # @default -- `""` (uses default StorageClass)
  storageClass: ""
  # -- Use existing PVC
  existingClaim: ""
  # -- PVC annotations
  annotations: {}

# -- Additional environment variables
extraEnvVars: []
  # - name: EXAMPLE_VAR
  #   value: "example-value"

# -- Additional volume mounts
extraVolumeMounts: []
  # - name: extra-volume
  #   mountPath: /extra

# -- Additional volumes
extraVolumes: []
  # - name: extra-volume
  #   emptyDir: {}
